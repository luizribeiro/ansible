- name: Install essential user packages
  pacman:
    name:
      - fzf
      - htop
      - jq
      - mosh
      - neovim
      - python-pynvim
      - ripgrep
      - tmux
      - wget
      - zsh
    state: present
  tags: packages
- name: Install networking tools
  pacman:
    name:
      - iperf
      - nmap
      - speedtest-cli
      - sshfs
      - traceroute
    state: present
  tags: packages
- name: Install man pages
  pacman:
    name:
      - man-db
      - man-pages
    state: present
  tags: packages
- name: Uninstall vim
  pacman:
    name: vim
    state: absent
    extra_args: --recursive
  tags: packages
- name: Link nvim as vim
  file:
    state: link
    src: /usr/bin/nvim
    dest: /usr/bin/vim
    owner: root
    group: root
    mode: u=rwx,g=rx,o=rx
  tags: packages

- include: users.yaml
- include: ntp.yaml
- include: firewall.yaml
- include: pacman.yaml
- include: sshd.yaml
- include: sshguard.yaml
- include: monit.yaml
- include: collectd.yaml
